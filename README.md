# jwp-subway-path

## 요구사항

### API 요구사항

- [x] 노선에 역 등록 API 신규 구현
- [x] 노선에 역 제거 API 신규 구현
- [x] 노선 조회 API 수정
    - 노선에 포함된 역을 순서대로 보여주도록 응답을 개선
- [x] 노선 목록 조회 API 수정
    - 노선에 포함된 역을 순서대로 보여주도록 응답을 개선
- [ ] 경로 조회 API 구현
    - [ ] 최단 거리 경로와 함께 총 거리 정보도 응답
    - [ ] 환승 가능
    - [ ] 요금 조회 기능 추가

### 도매인 요구사항

#### (1) 노선 역 등록

##### 노선 등록 정보

- [x] 구간
    - [x] 좌측 역
    - [x] 우측 역
    - [x] 거리
- [x] 역 연결 정보
- [x] 노선도
    - [x] 노선
    - [x] 역 연결 정보
    - [x] 시작 역
- [ ] 전체 지하철
    - [ ] 역 연결 정보

##### 노선 등록 조건

- [x] 노선에 역이 하나도 등록되지 않은 상황에서 최초 등록 시 두 역을 동시에 등록해야한다.
- [x] 하나의 역은 여러 노선에 등록이 될 수 있다.
- [x] 노선은 갈래길을 가질 수 없다.
- [x] 노선 가운데 역이 등록 될 경우 거리 정보를 고려해야한다.
- [x] 노선 가운데 역이 등록 될 경우 거리는 양의 정수라는 비즈니스 규칙을 지켜야한다.

##### 노선 역 제거

- [x] 노선에서 역을 제거할 경우 정상 동작을 위해 역을 재배치 되어야한다.
- [x] 노선에서 역이 제거될 경우 역과 역 사이의 거리도 재배정되어야한다.
- [x] 노선에 등록된 역이 2개 인 경우 하나의 역을 제거할 때 두 역이 모두 제거되어야한다.

#### (2) 경로 조회

##### 경로 조회
- [ ] 최단 거리 경로와 함께 총 거리 정보를 구할 수 있다.
- [ ] 여러 노선의 환승도 고려할 수 있다.
- [ ] 요금 정보도 포함하여 응답한다.

##### 요금 조회
- [ ] 기본 운임은 1,250원이다.
    - [ ] 기본 운임은 10km 이내이다.
- [ ] 10km ~ 50km는 5km 마다 100원씩 추가한다.
- [ ] 50km를 초과하면 8km 마다 100원씩 추가한다.

### 프로그래밍 요구사항
- [ ] 데이터베이스 설정과 프로덕션의 데이터베이스를 분리
    - [ ] 프로덕션의 데이터베이스는 로컬에 저장될 수 있도록 설정
    - [ ] 테스트용 데이터베이스는 인메모리로 동작할 수 있도록 설정

## API 명세

### (1) 역 등록

#### Request

- 역 등록은 왼쪽역과 오른쪽 역을 추가합니다.
- 등록하고자 하는 노선의 두 역 중 하나만 기존 역에 있으면 됩니다.

```http request
POST /sections HTTP/1.1
{
    "lineId": 1,
    "section":  {
        "leftStationId": 1,
        "rightStationId": 2,
        "distance": 2,
    }
}
```

#### Response

```http request
HTTP/1.1 201
```

### (2) 역 제거

#### Request

```http request
DELETE /sections/{lineId}/{stationId} HTTP/1.1
```

#### Response

```http request
HTTP/1.1 204
```

### (3) 경로 조회 API
#### Request
```http request
GET /paths/{startStationId}/{EndStationId} HTTP/1.1
```

#### Response

```http request
{
    "paths": [
                {
                     "stationId": 1,
                     "name": "서울역"
                },
                {
                     "stationId": 2,
                     "name": "시청역"
                },
                ...
             ],
    "distance": 8,
    "cost": 1250
}
```
